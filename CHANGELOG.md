# 游戏状态检测系统改进说明

## 2025-04-19 弹药识别功能升级

### 主要改进：

1. 新增相对坐标支持 - 系统现在可以自动根据屏幕分辨率调整检测区域，适配不同分辨率的游戏界面
2. 增强模板识别算法 - 开发新的数字模板识别器，提高了数字(0-9)的识别准确率
3. 双位数识别优化 - 改进了双位数的分割和识别算法，智能处理数字之间的间距
4. 调试输出增强 - 新增了大量调试输出和可视化功能，帮助排查识别问题
5. 鲁棒性提升 - 增加了错误处理和边界情况检查，提高了系统稳定性

### 技术细节：

- 在配置文件中引入`ammo_bbox_rel`参数，使用相对坐标取代固定像素坐标
- 使用灰度图直接模板匹配，避免之前二值化处理可能导致的细节丢失
- 智能分割双位数图像，采用比例分割而非简单对半分
- 加入详细日志记录和调试图像保存功能

### 后续改进方向：

- 继续优化模板质量和匹配算法参数
- 考虑引入机器学习模型进行数字识别 